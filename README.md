import random
import string

def generate_random_key(min_shift=1, max_shift=25):
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π —Å–¥–≤–∏–≥ (–∫–ª—é—á) –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è."""
    # –ö–ª—é—á - —ç—Ç–æ —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 25 (–¥–ª—è –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏–∑ 26 –±—É–∫–≤)
    return random.randint(min_shift, max_shift)

def encrypt_message(message, key):
    """–®–∏—Ñ—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, —Å–¥–≤–∏–≥–∞—è –∫–∞–∂–¥—É—é –±—É–∫–≤—É –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–ª—é—á–∞."""
    encrypted_text = ""
    
    for char in message:
        # –†–∞–±–æ—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ —Å –ª–∞—Ç–∏–Ω—Å–∫–∏–º–∏ –±—É–∫–≤–∞–º–∏
        if char.isalpha():
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä –∏ –±–∞–∑–∏—Å–Ω—ã–π —Å–∏–º–≤–æ–ª ('a' –∏–ª–∏ 'A')
            start = ord('a') if char.islower() else ord('A')
            
            # 1. –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å –±—É–∫–≤—ã –≤ –∞–ª—Ñ–∞–≤–∏—Ç–µ (0-25)
            char_index = ord(char) - start
            
            # 2. –í—ã–ø–æ–ª–Ω—è–µ–º —Å–¥–≤–∏–≥, –∏—Å–ø–æ–ª—å–∑—É—è –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ –º–æ–¥—É–ª—é (%) –¥–ª—è "–∑–∞–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è" –∞–ª—Ñ–∞–≤–∏—Ç–∞
            new_index = (char_index + key) % 26
            
            # 3. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å–∏–º–≤–æ–ª
            new_char = chr(start + new_index)
            encrypted_text += new_char
        else:
            # –û—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –¥—Ä—É–≥–∏–µ —Å–∏–º–≤–æ–ª—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
            encrypted_text += char
            
    return encrypted_text

# --- –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã ---

# 1. –°–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
random_key = generate_random_key()
# –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
random_phrases = [
    "Random code generator is active", 
    "Python is fun and versatile", 
    "Encrypted text looks mysterious"
]
original_message = random.choice(random_phrases)

# 2. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
cipher_text = encrypt_message(original_message, random_key)

# 3. –î–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (–æ–±—Ä–∞—Ç–Ω—ã–π —Å–¥–≤–∏–≥: (–∏–Ω–¥–µ–∫—Å - –∫–ª—é—á) % 26)
# –ß—Ç–æ–±—ã –¥–µ—à–∏—Ñ—Ä–æ–≤–∞—Ç—å, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–π —Å–¥–≤–∏–≥, —Ç.–µ. 26 - –∫–ª—é—á
decryption_key = 26 - random_key
decrypted_text = encrypt_message(cipher_text, decryption_key)

# --- –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ---
print("--- üîí –ü–†–û–°–¢–û–ô –®–ò–§–†–ê–¢–û–† –¶–ï–ó–ê–†–Ø (–°–ª—É—á–∞–π–Ω—ã–π —Å–¥–≤–∏–≥) ---")
print(f"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:  '{original_message}'")
print(f"–°–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á (—Å–¥–≤–∏–≥):  {random_key}")
print("-" * 50)

print(f"üîê –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: '{cipher_text}'")
print(f"–ö–ª—é—á –¥–ª—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:   {decryption_key}")
print(f"üîì –î–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: '{decrypted_text}'")
